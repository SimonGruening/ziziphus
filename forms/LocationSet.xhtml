<?xml version="1.0" encoding="UTF-8"?><html xmlns:ev="http://www.w3.org/2001/xml-events"
      xmlns:bf="http://betterform.sourceforge.net/xforms"
      xmlns:vra="http://www.vraweb.org/vracore4.htm"
      xmlns:bfc="http://betterform.sourceforge.net/xforms/controls"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:xsd="http://www.w3.org/2001/XMLSchema"
      xmlns:xf="http://www.w3.org/2002/xforms"
      xmlns:xi="http://www.w3.org/2001/XInclude"
      bf:transform="/apps/ziziphus/resources/xsl/ziziphus.xsl">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>Ziziphus_Image_DB</title><style type="text/css">
                    
                    .xfRequired .xfLabel:after{
                    content:'';
                    }
                    .xfRequired &gt; .xfLabel:after{
                    content:'*';
                    }

                    table, td {
                    border: thin solid #999999;
                    border-collapse: collapse;
                    padding: 3px;
                    }

                    tbody {
                    font-size: 0.85em;
                    }
                    tbody .xfGroup &gt; .xfControl .xfLabel {
                    float: left;
                    padding: 0;
                    margin: 3px 3px 0 7px;
                    min-width: 80px;
                    text-align: right;
                    }
                    tbody tr td &gt; .xfGroup {
                    background: #fafafa;
                    border-top: thin solid;
                    border-bottom: thin solid #cdcdcd;
                    padding: 5px 0;
                    }
                    tbody tr td .xfGroup:last-child {
                    border-bottom: none;
                    }
                    .xfRepeatItem {
                    background: whitesmoke;
                    }

                    .xfRepeatIndex .contentCol {
                    background-color: whitesmoke;
                    }
                    .bf .xfRepeatIndex {
                    background: #dddddd !important;
                    }
                    td{
                    vertical-align: top;
                    }
                    .vraAttributes .xfControl{
                    float:left;
                    }

                    .prefCol, .triggerCol {
                    width: 10px;
                    }
                    .prefCol .xfLabel{
                    display: none;
                    }
                    .contentCol &gt; .xfGroup {
                    width: 100%;
                    display: inline-block;
                    padding-bottom: 5px;
                    border-top: none !important;
                    }
                    .vraAttributes .xfControl {
                    border: thin solid #aaaaaa;
                    border-radius: 3px;
                    margin: 5px 5px 5px 0;
                    padding: 3px;
                    background: #eeeeee;
                    text-align: center;
                    }
                    .vraAttributes .xfLabel, .vraAttributes .xfValue{
                    font-size: 0.85em;
                    }
                    .vraAttributes .xfLabel {
                    margin: 0 !important;
                    padding: 0 !important;
                    border-bottom: thin solid #aaaaaa;
                    }

                    .prefCol .xfLabel {
                    display: none !important;
                    }
                    .vraAttributeTrigger {
                    float: right;
                    }
                    #attrDialog .xfControl {
                    float: none;
                    }
                    .buttonBar .xfTrigger{
                    display: inline-block !important;
                    font-size: 0.85em;
                    margin: 5px;
                    }
                    .notesDisplayTrigger {
                    float: right;
                    }
                    #notes, #notes .widgetContainer, #notes textarea{
                    width: 100%;
                    }
                    #attrDialog .xfLabel {
                    float: left;
                    margin: 0px 10px;
                    width: 100px;
                    text-align: right;
                    }
                    #attrDialog .xfInput .xfValue {
                    width: 250px;
                    }
                    #attrDialog .deleteAttribute {
                    float: right !important;
                    }
                    #attrDialog .xfGroup {
                    margin-bottom: 10px;
                    }

                </style></head>
   <body>
      <div id="xforms">
         <!-- ###################### MODEL ################################## -->
         <!-- ###################### MODEL ################################## -->
         <!-- ###################### MODEL ################################## -->
         <div style="display:none">
            <xf:model id="m-child-model" schema="../resources/xsd/vra-types.xsd">
               <xf:instance id="i-locationSet">
                  <locationSet xmlns="http://www.vraweb.org/vracore4.htm">
                     <display></display>
                     <notes></notes>
                     <location pref="false" type="">
                        <refid type=""></refid>
                        <name type=""></name>
                     </location>
                  </locationSet>
               </xf:instance>
               <xf:bind nodeset="instance()">
                  <xf:bind nodeset="vra:location">
                     <xf:bind nodeset="@pref" type="boolean"></xf:bind>
                     <xf:bind nodeset="@type" type="vra:locationTypeType"></xf:bind>
                     <xf:bind nodeset="vra:refid">
                        <xf:bind nodeset="@type" type="vra:locationRefidTypeType"></xf:bind>
                     </xf:bind>
                     <xf:bind nodeset="vra:name">
                        <xf:bind nodeset="@type" type="vra:locationNameTypeType"></xf:bind>
                     </xf:bind>
                  </xf:bind>
               </xf:bind>
               <xf:instance id="i-templates">
                  <templates xmlns="http://www.vraweb.org/vracore4.htm">
                     <location pref="false" type="">
                        <refid type=""></refid>
                        <name type=""></name>
                     </location>
                     <notes></notes>
                     <display></display>
                  </templates>
               </xf:instance>
               <xi:include href="bricks/vraAttributesInstance.xml"></xi:include>
               <xf:instance id="i-util">
                  <data xmlns="">
                     <currentElement></currentElement>
                  </data>
               </xf:instance>
            </xf:model>
         </div>
         <!-- ####################################### VISIBLE UI ####################################### -->
         <!-- ####################################### VISIBLE UI ####################################### -->
         <!-- ####################################### VISIBLE UI ####################################### -->
         <div class="toolbar">
            <xf:trigger class="t-save" model="m-child-model" title="Save">
               <xf:label>save</xf:label>
            </xf:trigger>
            <xf:trigger class="t-plus" model="m-child-model" title="Add Location">
               <xf:label>+</xf:label>
               <xf:insert model="m-child-model" nodeset="instance()/vra:location[last()]"
                          origin="instance('i-templates')/vra:location"></xf:insert>
            </xf:trigger>
         </div>
         <xf:group id="outerGroup" appearance="minimal" model="m-child-model"
                   ref="instance('i-locationSet')">
            <xf:label></xf:label>
            <xf:action ev:event="reset-dialog"></xf:action>
            <xf:action ev:event="init-dialog">
               <xf:setvalue ref="instance('i-vraAttributes')/vra:vraElement[1]/@dataDate"></xf:setvalue>
               <xf:setvalue ref="instance('i-vraAttributes')/vra:vraElement[1]/@extent"></xf:setvalue>
               <xf:setvalue ref="instance('i-vraAttributes')/vra:vraElement[1]/@href"></xf:setvalue>
               <xf:setvalue ref="instance('i-vraAttributes')/vra:vraElement[1]/@refid"></xf:setvalue>
               <xf:setvalue ref="instance('i-vraAttributes')/vra:vraElement[1]/@rules"></xf:setvalue>
               <xf:setvalue ref="instance('i-vraAttributes')/vra:vraElement[1]/@source"></xf:setvalue>
               <xf:setvalue ref="instance('i-vraAttributes')/vra:vraElement[1]/@vocab"></xf:setvalue>
               <xf:setvalue ref="instance('i-vraAttributes')/vra:vraElement[1]/@lang"></xf:setvalue>
               <xf:setvalue ref="instance('i-vraAttributes')/vra:vraElement[1]/@transliteration"></xf:setvalue>
               <xf:setvalue ref="instance('i-vraAttributes')/vra:vraElement[1]/@script"></xf:setvalue>
               <xf:insert context="instance('i-vraAttributes')/vra:vraElement[1]"
                          origin="instance('i-locationSet')/vra:location[index('r-vraLocation')]/*[local-name()=instance('i-util')/currentElement]/@*[local-name(.)=('dataDate','extent','href','refid','rules','source','vocab','lang','transliteration','script')]"></xf:insert>
            </xf:action>
            <table>
               <tbody model="m-child-model" id="r-vraLocation" xf:repeat-nodeset="vra:location">
                  <tr>
                     <td class="prefCol">
                        <xf:input ref="@pref">
                           <xf:label>pref</xf:label>
                           <xf:hint>preferred</xf:hint>
                        </xf:input>
                     </td>
                     <td class="contentCol">
                        <xf:group appearance="minimal">
                           <xf:select1 ref="@type">
                              <xf:label>Type</xf:label>
                              <xf:item>
                                 <xf:label>Creation</xf:label>
                                 <xf:value>creation</xf:value>
                              </xf:item>
                              <xf:item>
                                 <xf:label>Discovery</xf:label>
                                 <xf:value>discovery</xf:value>
                              </xf:item>
                              <xf:item>
                                 <xf:label>Exhibition</xf:label>
                                 <xf:value>exhibition</xf:value>
                              </xf:item>
                              <xf:item>
                                 <xf:label>FormerOwner</xf:label>
                                 <xf:value>formerOwner</xf:value>
                              </xf:item>
                              <xf:item>
                                 <xf:label>FormerRepository</xf:label>
                                 <xf:value>formerRepository</xf:value>
                              </xf:item>
                              <xf:item>
                                 <xf:label>FormerSite</xf:label>
                                 <xf:value>formerSite</xf:value>
                              </xf:item>
                              <xf:item>
                                 <xf:label>Installation</xf:label>
                                 <xf:value>installation</xf:value>
                              </xf:item>
                              <xf:item>
                                 <xf:label>Intended</xf:label>
                                 <xf:value>intended</xf:value>
                              </xf:item>
                              <xf:item>
                                 <xf:label>Owner</xf:label>
                                 <xf:value>owner</xf:value>
                              </xf:item>
                              <xf:item>
                                 <xf:label>Performance</xf:label>
                                 <xf:value>performance</xf:value>
                              </xf:item>
                              <xf:item>
                                 <xf:label>Publication</xf:label>
                                 <xf:value>publication</xf:value>
                              </xf:item>
                              <xf:item>
                                 <xf:label>Repository</xf:label>
                                 <xf:value>repository</xf:value>
                              </xf:item>
                              <xf:item>
                                 <xf:label>Site</xf:label>
                                 <xf:value>site</xf:value>
                              </xf:item>
                              <xf:item>
                                 <xf:label>Other</xf:label>
                                 <xf:value>other</xf:value>
                              </xf:item>
                           </xf:select1>
                        </xf:group>
                        <xf:group appearance="minimal">
                           <xf:input ref="vra:name" class="elementName">
                              <xf:label>Name</xf:label>
                           </xf:input>
                           <xf:select1 ref="vra:name/@type">
                              <xf:label>Type</xf:label>
                              <xf:item>
                                 <xf:label>Corporate</xf:label>
                                 <xf:value>corporate</xf:value>
                              </xf:item>
                              <xf:item>
                                 <xf:label>Geographic</xf:label>
                                 <xf:value>geographic</xf:value>
                              </xf:item>
                              <xf:item>
                                 <xf:label>Personal</xf:label>
                                 <xf:value>personal</xf:value>
                              </xf:item>
                              <xf:item>
                                 <xf:label>Other</xf:label>
                                 <xf:value>other</xf:value>
                              </xf:item>
                           </xf:select1>
                           <xf:group class="vraAttributes" appearance="minimal" ref="vra:name">
                              <xi:include href="bricks/vraAttributesViewUI.xml"></xi:include>
                           </xf:group>
                           <xf:trigger class="vraAttributeTrigger">
                              <xf:label>...</xf:label>
                              <xf:action>
                                 <xf:setvalue ref="instance('i-util')/currentElement" value="'name'"></xf:setvalue>
                                 <xf:dispatch name="init-dialog" targetid="outerGroup"></xf:dispatch>
                              </xf:action>
                              <bfc:show dialog="attrDialog" ev:event="DOMActivate"></bfc:show>
                           </xf:trigger>
                        </xf:group>
                        <xf:group appearance="minimal">
                           <xf:input ref="vra:refid">
                              <xf:label>Refid</xf:label>
                           </xf:input>
                           <xf:select1 ref="vra:refid/@type">
                              <xf:label>Type</xf:label>
                              <xf:item>
                                 <xf:label>Accession</xf:label>
                                 <xf:value>accession</xf:value>
                              </xf:item>
                              <xf:item>
                                 <xf:label>Barcode</xf:label>
                                 <xf:value>barcode</xf:value>
                              </xf:item>
                              <xf:item>
                                 <xf:label>ShelfList</xf:label>
                                 <xf:value>shelfList</xf:value>
                              </xf:item>
                              <xf:item>
                                 <xf:label>Other</xf:label>
                                 <xf:value>other</xf:value>
                              </xf:item>
                           </xf:select1>
                           <xf:group class="vraAttributes" appearance="minimal" ref="vra:refid">
                              <xi:include href="bricks/vraAttributesViewUI.xml"></xi:include>
                           </xf:group>
                           <xf:trigger class="vraAttributeTrigger">
                              <xf:label>...</xf:label>
                              <xf:action>
                                 <xf:setvalue ref="instance('i-util')/currentElement" value="'refid'"></xf:setvalue>
                                 <xf:dispatch name="init-dialog" targetid="outerGroup"></xf:dispatch>
                              </xf:action>
                              <bfc:show dialog="attrDialog" ev:event="DOMActivate"></bfc:show>
                           </xf:trigger>
                        </xf:group>
                     </td>
                     <td class="triggerCol">
                        <xf:trigger>
                           <xf:label>x</xf:label>
                           <xf:delete nodeset="instance('i-locationSet')/vra:location[index('r-vraLocation')]"></xf:delete>
                        </xf:trigger>
                     </td>
                  </tr>
               </tbody>
            </table>
            <!-- ############################## NOTES ####################################### -->
            <!-- ############################## NOTES ####################################### -->
            <!-- ############################## NOTES ####################################### -->
            <xf:switch>
               <xf:case id="c-hidden">
                  <xf:trigger class="notesDisplayTrigger">
                     <xf:label>Show Notes</xf:label>
                     <xf:toggle case="c-showNotes"></xf:toggle>
                  </xf:trigger>
               </xf:case>
               <xf:case id="c-showNotes">
                  <xf:trigger class="notesDisplayTrigger">
                     <xf:label>Hide Notes</xf:label>
                     <xf:toggle case="c-hidden"></xf:toggle>
                  </xf:trigger>
                  <xf:textarea id="notes" ref="vra:notes" type="nodeValue" model="m-child-model">
                     <xf:label>Notes</xf:label>
                  </xf:textarea>
               </xf:case>
            </xf:switch>
         </xf:group>
         <bfc:dialog id="attrDialog">
            <xf:label>Attributes</xf:label>
            <xf:group appearance="minimal" ref="instance('i-vraAttributes')/vra:vraElement">
               <xf:group appearance="minimal" class="attrDialogGroup">
                  <xf:input ref="@dataDate" id="first">
                     <xf:label>dataDate</xf:label>
                  </xf:input>
                  <xf:trigger class="deleteAttribute">
                     <xf:label>delete</xf:label>
                     <xf:setvalue ref="@dataDate"></xf:setvalue>
                  </xf:trigger>
               </xf:group>
               <xf:group appearance="minimal" class="attrDialogGroup">
                  <xf:input ref="@extent">
                     <xf:label>extent</xf:label>
                  </xf:input>
                  <xf:trigger class="deleteAttribute">
                     <xf:label>delete</xf:label>
                     <xf:setvalue ref="@extent"></xf:setvalue>
                  </xf:trigger>
               </xf:group>
               <xf:group appearance="minimal" class="attrDialogGroup">
                  <xf:input ref="@href">
                     <xf:label>href</xf:label>
                  </xf:input>
                  <xf:trigger class="deleteAttribute">
                     <xf:label>delete</xf:label>
                     <xf:setvalue ref="@href"></xf:setvalue>
                  </xf:trigger>
               </xf:group>
               <xf:group appearance="minimal" class="attrDialogGroup">
                  <xf:input ref="@refid">
                     <xf:label>refid</xf:label>
                  </xf:input>
                  <xf:trigger class="deleteAttribute">
                     <xf:label>delete</xf:label>
                     <xf:setvalue ref="@refid"></xf:setvalue>
                  </xf:trigger>
               </xf:group>
               <xf:group appearance="minimal" class="attrDialogGroup">
                  <xf:input ref="@rules">
                     <xf:label>rules</xf:label>
                  </xf:input>
                  <xf:trigger class="deleteAttribute">
                     <xf:label>delete</xf:label>
                     <xf:setvalue ref="@rules"></xf:setvalue>
                  </xf:trigger>
               </xf:group>
               <xf:group appearance="minimal" class="attrDialogGroup">
                  <xf:input ref="@source">
                     <xf:label>source</xf:label>
                  </xf:input>
                  <xf:trigger class="deleteAttribute">
                     <xf:label>delete</xf:label>
                     <xf:setvalue ref="@source"></xf:setvalue>
                  </xf:trigger>
               </xf:group>
               <xf:group appearance="minimal" class="attrDialogGroup">
                  <xf:select1 ref="@vocab">
                     <xf:label>vocab</xf:label>
                     <xf:item>
                        <xf:label>ULAN</xf:label>
                        <xf:value>ULAN</xf:value>
                     </xf:item>
                     <xf:item>
                        <xf:label>GND</xf:label>
                        <xf:value>GND</xf:value>
                     </xf:item>
                     <xf:item>
                        <xf:label>(AKL)</xf:label>
                        <xf:value>(AKL)</xf:value>
                     </xf:item>
                  </xf:select1>
                  <xf:trigger class="deleteAttribute">
                     <xf:label>delete</xf:label>
                     <xf:setvalue ref="@vocab"></xf:setvalue>
                  </xf:trigger>
               </xf:group>
               <xf:group appearance="minimal" class="attrDialogGroup">
                  <xf:input ref="@lang">
                     <xf:label>Language</xf:label>
                  </xf:input>
                  <xf:trigger class="deleteAttribute">
                     <xf:label>delete</xf:label>
                     <xf:setvalue ref="@lang"></xf:setvalue>
                  </xf:trigger>
               </xf:group>
               <xf:group appearance="minimal" class="attrDialogGroup">
                  <xf:input ref="@transliteration">
                     <xf:label>Transliteration</xf:label>
                  </xf:input>
                  <xf:trigger class="deleteAttribute">
                     <xf:label>delete</xf:label>
                     <xf:setvalue ref="@transliteration"></xf:setvalue>
                  </xf:trigger>
               </xf:group>
               <xf:group appearance="minimal" class="attrDialogGroup">
                  <xf:input ref="@script">
                     <xf:label>Script</xf:label>
                  </xf:input>
                  <xf:trigger class="deleteAttribute">
                     <xf:label>delete</xf:label>
                     <xf:setvalue ref="@script"></xf:setvalue>
                  </xf:trigger>
               </xf:group>
               <xf:group class="buttonBar">
                  <xf:trigger>
                     <xf:label>Ok</xf:label>
                     <xf:action>
                        <xf:delete nodeset="instance('i-locationSet')/vra:location/*[local-name()=instance('i-util')/currentElement]/@*[local-name(.)=('dataDate','extent','href','refid','rules','source','vocab','lang','transliteration','script')]"></xf:delete>
                        <xf:insert origin="instance('i-vraAttributes')/vra:vraElement[1]/@*[string-length(.) != 0]"
                                   context="instance('i-locationSet')/vra:location[index('r-vraLocation')]/*[local-name()=instance('i-util')/currentElement]"></xf:insert>
                     </xf:action>
                     <bfc:hide dialog="attrDialog"></bfc:hide>
                  </xf:trigger>
                  <xf:trigger appearance="minimal">
                     <xf:label>Cancel</xf:label>
                     <bfc:hide dialog="attrDialog"></bfc:hide>
                  </xf:trigger>
               </xf:group>
            </xf:group>
         </bfc:dialog>
      </div>
   </body>
</html>